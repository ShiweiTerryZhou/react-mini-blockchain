(this.webpackJsonpmini_miner=this.webpackJsonpmini_miner||[]).push([[0],{122:function(e,t,a){"use strict";(function(e){var n=a(50),i=a(51),r=a(19),o=a(59),s=a(60),c=a(0),l=a.n(c),h=a(62),u=a(129),p=a(43),m=a(28),d=a(128),f=(a(140),a(123)),g=(a(144),a(145)),v=function(t){Object(s.a)(c,t);var a=Object(o.a)(c);function c(e){var t;Object(n.a)(this,c),t=a.call(this,e);var i=new Date;return t.state={currentTransaction:"",chain:[{index:0,timestamp:i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),proof:1,transaction:"This is genesis block",previous_hash:"0",verified:1}]},t.generateBlocks=t.generateBlocks.bind(Object(r.a)(t)),t.handleTransacChange=t.handleTransacChange.bind(Object(r.a)(t)),t.setVerification=t.setVerification.bind(Object(r.a)(t)),t.updateVerification=t.updateVerification.bind(Object(r.a)(t)),t.reVerification=t.reVerification.bind(Object(r.a)(t)),t}return Object(i.a)(c,[{key:"generateBlocks",value:function(t,a){var n=String(t.previous_hash);n=e.from(n,"utf8").toString("hex");for(var i=new Date,r=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),o=String(t.index+1)+String(r)+String(a),s=0,c="";"00"!==c.substring(0,2);){s+=1;var l=o+String(s),h=n.split("").reverse().join("")+l;c=String(g.createHash("sha256").update(h).digest("hex"))}var u={index:t.index+1,timestamp:r,proof:s,transaction:a,previous_hash:c,verified:1};this.setState((function(e){return{chain:e.chain.concat(u)}}))}},{key:"handleTransacChange",value:function(e){this.setState({currentTransaction:e.target.value})}},{key:"setVerification",value:function(e,t){0!==t&&-1!==t||this.setState((function(a){for(var n=a.chain,i=e;i<n.length;i++)n[i].verified=t;return{chain:n}}))}},{key:"reVerification",value:function(t,a,n){if(0!==t){var i=this.state.chain[t-1],r=String(i.previous_hash);r=e.from(r,"utf8").toString("hex");for(var o=String(t)+String(n)+String(a),s=0,c="";"00"!==c.substring(0,2);){s+=1;var l=o+String(s),h=r.split("").reverse().join("")+l;c=String(g.createHash("sha256").update(h).digest("hex"))}this.setState((function(e){var a=e.chain;return a[t].previous_hash=c,a[t].proof=s,a[t].verified=1,{chain:a}}))}}},{key:"updateVerification",value:function(t,a,n,i){if(0!==t){var r=this.state.chain[t-1],o=String(r.previous_hash);o=e.from(o,"utf8").toString("hex");var s=String(t)+String(i)+String(a),c="",l=s+String(n),h=o.split("").reverse().join("")+l;c=String(g.createHash("sha256").update(h).digest("hex")),this.setState((function(e){var r=e.chain;if(r[t].previous_hash=c,r[t].proof=n,r[t].transaction=a,r[t].timestamp=i,"00"===c.substring(0,2))for(var o=t;o<r.length;o++)r[o].verified=0;else for(var s=t;s<r.length;s++)r[s].verified=-1;return{chain:r}}))}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(h.a,{style:{paddingLeft:"50px",paddingRight:"50px"},bg:"dark",variant:"dark",expand:"lg"},l.a.createElement(h.a.Brand,{style:{fontWeight:"bold"}},"Mini BlockChain by Shiwei Zhou"),l.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(u.a,{className:"ml-auto"},l.a.createElement(u.a.Link,{href:"http://www.terryzsw.com"},"Back to my home page")))),l.a.createElement("div",{className:"container"},l.a.createElement(p.a.Dialog,{style:{minWidth:"100%"}},l.a.createElement(p.a.Header,null,l.a.createElement(p.a.Title,null,"Instruction")),l.a.createElement(p.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("p",null,"Click GenerateBlocks to create new blocks with content you want in 'Next transaction' input box"),l.a.createElement("br",null),l.a.createElement("p",null,"Change transaction coneten in block to see what will happen"),l.a.createElement("br",null),l.a.createElement("p",null,"Click 'Re-Hash This Block' to generate new proof for valid hash. (Valid hash have to start with 00)"),l.a.createElement("br",null),l.a.createElement("p",null,"Green card means verified block. Yellow card means uncerified block with valid hash. Red card means unvalid hash or broken link."),l.a.createElement("br",null))),l.a.createElement(p.a.Footer,null,l.a.createElement("p",null,"Have Fun")))),l.a.createElement("div",{className:"row",style:{paddingLeft:"50px",paddingRight:"50px"}},this.state.chain.map((function(t){return l.a.createElement(f.a,{updateVerification:e.updateVerification,reVerification:e.reVerification,key:t.index,item:t,style:{marginLeft:"20%",marginRight:"20%"}})}))),l.a.createElement("br",null),l.a.createElement(m.a.Group,{controlId:"transactionForm",style:{marginLeft:"20%",marginRight:"20%"}},l.a.createElement(m.a.Label,null,"Next transaction"),l.a.createElement(m.a.Control,{type:"text",placeholder:"It can be any message",onChange:function(t){return e.handleTransacChange(t)}})),l.a.createElement(d.a,{variant:"primary",onClick:function(t){return e.generateBlocks(e.state.chain.slice(-1)[0],e.state.currentTransaction,t)}},"GenerateBlocks"))}}]),c}(c.Component);t.a=v}).call(this,a(10).Buffer)},123:function(e,t,a){"use strict";var n=a(50),i=a(51),r=a(19),o=a(59),s=a(60),c=a(0),l=a.n(c),h=a(63),u=a(28),p=a(130),m=a(128),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var i;Object(n.a)(this,a);var o=(i=t.call(this,e)).props.item,s=o.index,c=o.timestamp,l=o.proof,h=o.transaction,u=o.previous_hash;return i.state={cardBackground:[144,230,144],hash:u,proof:l,timestamp:c,transaction:h,index:s},i.handleChange=i.handleChange.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"handleChange",value:function(e,t){var a=this.props.item,n=a.index,i=a.timestamp,r=a.proof,o=a.transaction;a.previous_hash;switch(t){case 0:var s=e.target.value;this.setState((function(e){e.transaction=s})),this.props.updateVerification(n,s,r,i);break;case 1:var c=e.target.value;this.setState((function(e){e.transaction=c})),this.props.updateVerification(n,o,c,i);break;case 2:var l=e.target.value;this.setState((function(e){e.transaction=l})),this.props.updateVerification(n,o,r,l)}}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState((function(e){e.hash=t.props.item.previous_hash})),1===this.props.item.verified?this.setState((function(e){e.cardBackground=[144,230,144]})):0===this.props.item.verified?this.setState((function(e){e.cardBackground=[255,255,153]})):-1===this.props.item.verified&&this.setState((function(e){e.cardBackground=[255,204,203]}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.item!==e.item&&this.setState((function(e){e.hash=t.props.item.previous_hash}))}},{key:"render",value:function(){var e=this;console.log(this.state);var t=this.props.item,a=t.index,n=t.timestamp,i=t.proof,r=t.transaction;t.previous_hash;return l.a.createElement("div",null,l.a.createElement(h.a,{style:{width:"18rem",background:"rgb("+this.state.cardBackground+")",marginLeft:"50px",marginBottom:"50px"}},l.a.createElement(h.a.Body,null,l.a.createElement(h.a.Title,null,"Block Index: ",a),l.a.createElement(h.a.Text,null,l.a.createElement(u.a.Group,null,"transaction:"," ",l.a.createElement(u.a.Control,{size:"sm",type:"text",defaultValue:r,placeholder:"transaction",onInput:function(t){return e.handleChange(t,0)}}),"proof:"," ",l.a.createElement(u.a.Control,{size:"sm",type:"number",value:i,placeholder:"proof",onInput:function(t){return e.handleChange(t,1)},readOnly:!0}),"timestamp:"," ",l.a.createElement(u.a.Control,{size:"sm",type:"text",defaultValue:n,placeholder:"timestamp",onInput:function(t){return e.handleChange(t,2)},readOnly:!0}),"original hash:"," ",l.a.createElement(u.a.Control,{size:"sm",type:"text",defaultValue:this.state.hash,placeholder:"hash",readOnly:!0}),"current hash:"," ",l.a.createElement(p.a,null,l.a.createElement(p.a.Item,null,this.state.hash)))),l.a.createElement(m.a,{variant:"primary",onClick:function(){return e.props.reVerification(e.state.index,e.state.transaction,e.state.timestamp)}},"Re-Hash This Block"))))}}]),a}(c.Component);t.a=d},132:function(e,t,a){e.exports=a(225)},137:function(e,t,a){},140:function(e,t,a){},146:function(e,t){},148:function(e,t){},182:function(e,t){},183:function(e,t){},225:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(22),o=a.n(r),s=(a(137),a(122));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(s.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[132,1,2]]]);
//# sourceMappingURL=main.d962582f.chunk.js.map